
/*!
* Metro JS for jQuery
* http://drewgreenwell.com/ 
* For details and usage info see: http://drewgreenwell.com/projects/metrojs

Copyright (C) 2013, Drew Greenwell

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), 
to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, 
and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, 
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(f){f.fn.metrojs={capabilities:null,checkCapabilities:function(k,j){if(f.fn.metrojs.capabilities==null||(typeof(j)!="undefined"&&j==true)){f.fn.metrojs.capabilities=new f.fn.metrojs.MetroModernizr(k)}return f.fn.metrojs.capabilities}};var g=f.fn.metrojs,e=window.console;if(typeof e!=="object"){e={};e.log=function(){};e.error=function(){}}var d=typeof(f.error)==="function"?f.error:e.error;var c=99000;f.fn.liveTile=function(l){if(a[l]){var j=[];for(var k=1;k<=arguments.length;k++){j[k-1]=arguments[k]}return a[l].apply(this,j)}else{if(typeof l==="object"||!l){return a.init.apply(this,arguments)}else{f.error("Method "+l+" does not exist on jQuery.liveTile");return null}}};f.fn.liveTile.contentModules={modules:[],addContentModule:function(j,k){if(!(this.modules instanceof Array)){this.modules=[]}this.modules.push(k)},hasContentModule:function(j){if(typeof(j)==="undefined"||!(this.modules instanceof Array)){return -1}for(var k=0;k<this.modules.length;k++){if(typeof(this.modules[k].moduleName)!="undefined"&&this.modules[k].moduleName==j){return k}}return -1}};f.fn.liveTile.defaults={mode:"slide",speed:500,initDelay:-1,delay:5000,stops:"100%",stack:false,direction:"vertical",animationDirection:"forward",tileSelector:">div,>li,>p,>img,>a",tileFaceSelector:">div,>li,>p,>img,>a",ignoreDataAttributes:false,click:null,link:"",newWindow:false,bounce:false,bounceDirections:"all",bounceFollowsMove:true,pauseOnHover:false,pauseOnHoverEvent:"both",playOnHover:false,playOnHoverEvent:"both",onHoverDelay:0,onHoverOutDelay:200,repeatCount:-1,appendBack:true,alwaysTrigger:false,flipListOnHover:false,flipListOnHoverEvent:"mouseout",noHAflipOpacity:"1",haTransFunc:"ease",noHaTransFunc:"linear",currentIndex:0,startNow:true,useModernizr:(typeof(window.Modernizr)!=="undefined"),useHardwareAccel:true,useTranslate:true,faces:{$front:null,$back:null},animationStarting:function(l,j,k){},animationComplete:function(l,j,k){},triggerDelay:function(j){return Math.random()*3000},swap:"",swapFront:"-",swapBack:"-",contentModules:[],rebindMessage:"tile data is missing. Are you missing a call to rebind or destroy? You may also be able to avoid this error by calling stop or pause"};var a={init:function(j){var k=f.extend({},f.fn.liveTile.defaults,j);g.checkCapabilities(k);b.getBrowserPrefix();if(f.fn.liveTile.contentModules.hasContentModule("image")==-1){f.fn.liveTile.contentModules.addContentModule("image",h.imageSwap)}if(f.fn.liveTile.contentModules.hasContentModule("html")==-1){f.fn.liveTile.contentModules.addContentModule("html",h.htmlSwap)}return f(this).each(function(o,m){var n=f(m),l=i.initTileData(n,k);l.faces=i.prepTile(n,l);l.fade=function(q){i.fade(n,q)};l.slide=function(q){i.slide(n,q)};l.carousel=function(q){i.carousel(n,q)};l.flip=function(q){i.flip(n,q)};l.flipList=function(q){i.flipList(n,q)};var p={fade:l.fade,slide:l.slide,carousel:l.carousel,flip:l.flip,"flip-list":l.flipList};l.doAction=function(q){var r=p[l.mode];if(typeof(r)==="function"){r(q);l.hasRun=true}if(q==l.timer.repeatCount){l.runEvents=false}};l.timer=new f.fn.metrojs.TileTimer(l.delay,l.doAction,l.repeatCount);n.data("LiveTile",l);if(l.mode!=="flip-list"||l.flipListOnHover==false){if(l.pauseOnHover){i.bindPauseOnHover(n)}else{if(l.playOnHover){i.bindPlayOnHover(n,l)}}}if(l.link.length>0||typeof(l.click)==="function"){n.css({cursor:"pointer"}).bind("click.liveTile",function(r){var q=true;if(typeof(l.click)==="function"){q=l.click(n,l)||false}if(q&&l.link.length>0){r.preventDefault();if(l.newWindow){window.open(l.link)}else{window.location=l.link}}})}i.bindBounce(n,l);if(l.startNow&&l.mode!="none"){l.runEvents=true;l.timer.start(l.initDelay)}})},"goto":function(j){var m,k=typeof(j);if(k==="undefined"){m={index:-99,delay:0,autoAniDirection:false}}if(k==="number"||!isNaN(j)){m={index:parseInt(j,10),delay:0}}else{if(k==="string"){if(j=="next"){m={index:-99,delay:0}}else{if(j.indexOf("prev")===0){m={index:-100,delay:0}}else{f.error(j+' is not a recognized action for .liveTile("goto")');return f(this)}}}else{if(k==="object"){if(typeof(j.delay)==="undefined"){j.delay=0}var l=typeof(j.index);if(l==="undefined"){j.index=0}else{if(l==="string"){if(j.index==="next"){j.index=-99}else{if(j.index.indexOf("prev")===0){j.index=-100}}}}m=j}}}return f(this).each(function(u,s){var o=f(s),r=o.data("LiveTile"),t=o.data("metrojs.tile"),q=m.index;if(t.animating===true){return f(this)}if(r.mode==="carousel"){var n=r.faces.$listTiles.filter(".active");var p=r.faces.$listTiles.index(n);if(q===-100){if(typeof(m.autoAniDirection)==="undefined"||m.autoAniDirection==true){r.tempValues.animationDirection=typeof(m.animationDirection)==="undefined"?"backward":m.animationDirection}q=p===0?r.faces.$listTiles.length-1:p-1}else{if(q===-99){if(typeof(m.autoAniDirection)==="undefined"||m.autoAniDirection==true){r.tempValues.animationDirection=typeof(m.animationDirection)==="undefined"?"forward":m.animationDirection}q=p+1}}if(p==q){return}if(typeof(m.direction)!=="undefined"){r.tempValues.direction=m.direction}if(typeof(m.animationDirection)!=="undefined"){r.tempValues.animationDirection=m.animationDirection}if(q==0){r.currentIndex=r.faces.$listTiles.length}else{r.currentIndex=q-1}}else{r.currentIndex=q}r.runEvents=true;r.timer.start(m.delay>=0?m.delay:r.delay)})},play:function(j){var l,k=typeof(j);if(k==="undefined"){l={delay:-1}}else{if(k==="number"){l={delay:j}}else{if(k==="object"){if(typeof(j.delay)==="undefined"){j.delay=-1}l=j}}}return f(this).each(function(p,o){var m=f(o),n=m.data("LiveTile");n.runEvents=true;if(l.delay<0&&!n.hasRun){l.delay=n.initDelay}n.timer.start(l.delay>=0?l.delay:n.delay)})},animate:function(){return f(this).each(function(m,l){var j=f(l),k=j.data("LiveTile");k.doAction()})},stop:function(){return f(this).each(function(m,l){var j=f(l),k=j.data("LiveTile");k.hasRun=false;k.runEvents=false;k.timer.stop();window.clearTimeout(k.eventTimeout);window.clearTimeout(k.flCompleteTimeout);window.clearTimeout(k.completeTimeout);if(k.mode==="flip-list"){k.faces.$listTiles.each(function(o,n){var p=f(n).data("metrojs.tile");window.clearTimeout(p.eventTimeout);window.clearTimeout(p.flCompleteTimeout);window.clearTimeout(p.completeTimeout)})}})},pause:function(){return f(this).each(function(m,l){var j=f(l),k=j.data("LiveTile");k.timer.pause();k.runEvents=false;window.clearTimeout(k.eventTimeout);window.clearTimeout(k.flCompleteTimeout);window.clearTimeout(k.completeTimeout);if(k.mode==="flip-list"){k.faces.$listTiles.each(function(o,n){var p=f(n).data("metrojs.tile");window.clearTimeout(p.eventTimeout);window.clearTimeout(p.flCompleteTimeout);window.clearTimeout(p.completeTimeout)})}})},restart:function(j){var l,k=typeof(j);if(k==="undefined"){l={delay:-1}}else{if(k==="number"){l={delay:j}}else{if(k==="object"){if(typeof(j.delay)==="undefined"){j.delay=-1}l=j}}}return f(this).each(function(p,o){var m=f(o),n=m.data("LiveTile");if(l.delay<0&&!n.hasRun){l.delay=n.initDelay}n.hasRun=false;n.runEvents=true;n.timer.restart(l.delay>=0?l.delay:n.delay)})},rebind:function(j){return f(this).each(function(l,k){if(typeof(j)!=="undefined"){if(typeof(j.timer)!=="undefined"&&j.timer!=null){j.timer.stop()}j.hasRun=false;a.init.apply(k,[j])}else{a.init.apply(k,[{}])}})},destroy:function(j){var k=typeof(j),l;if(k==="undefined"){l={removeCss:false}}else{if(k==="boolean"){l={removeCss:j}}else{if(k==="object"){if(typeof(j.removeCss)==="undefined"){j.removeCss=false}l=j}}}return f(this).each(function(q,p){var n=f(p);var o=n.data("LiveTile");if(typeof(o)==="undefined"){return}n.unbind(".liveTile");var m=b.appendStyleProperties({margin:"",cursor:""},["transform","transition"],["",""]);o.timer.stop();window.clearTimeout(o.eventTimeout);window.clearTimeout(o.flCompleteTimeout);window.clearTimeout(o.completeTimeout);if(o.faces.$listTiles!=null){o.faces.$listTiles.each(function(s,r){var v=f(r);if(o.mode==="flip-list"){var u=v.data("metrojs.tile");window.clearTimeout(u.eventTimeout);window.clearTimeout(u.flCompleteTimeout);window.clearTimeout(u.completeTimeout)}else{if(o.mode==="carousel"){var t=o.listData[s];if(t.bounce){i.unbindMsBounce(v,t)}}}if(l.removeCss){v.removeClass("ha");v.find(o.tileFaceSelector).unbind(".liveTile").removeClass("bounce flip-front flip-back ha slide slide-front slide-back").css(m)}else{v.find(o.tileFaceSelector).unbind(".liveTile")}v.removeData("metrojs.tile")}).unbind(".liveTile")}if(o.faces.$front!=null&&l.removeCss){o.faces.$front.removeClass("flip-front flip-back ha slide slide-front slide-back").css(m)}if(o.faces.$back!=null&&l.removeCss){o.faces.$back.removeClass("flip-front flip-back ha slide slide-front slide-back").css(m)}if(o.bounce){i.unbindMsBounce(n,o)}if(o.playOnHover){i.unbindMsPlayOnHover(n,o)}if(o.pauseOnhover){i.unbindMsPauseOnHover(n,o)}n.removeClass("ha");n.removeData("LiveTile");n.removeData("metrojs.tile");o=null})}};var i={dataAtr:function(l,j,k){return typeof(l.attr("data-"+j))!=="undefined"?l.attr("data-"+j):k},dataMethod:function(l,j,k){return typeof(l.data(j))!=="undefined"?l.data(j):k},getDataOrDefault:null,initTileData:function(n,l){var q=l.ignoreDataAttributes==false,k=null;if(this.getDataOrDefault==null){this.getDataOrDefault=g.capabilities.isOldJQuery?this.dataAtr:this.dataMethod}if(q){k={speed:this.getDataOrDefault(n,"speed",l.speed),delay:this.getDataOrDefault(n,"delay",l.delay),stops:this.getDataOrDefault(n,"stops",l.stops),stack:this.getDataOrDefault(n,"stack",l.stack),mode:this.getDataOrDefault(n,"mode",l.mode),direction:this.getDataOrDefault(n,"direction",l.direction),useHardwareAccel:this.getDataOrDefault(n,"ha",l.useHardwareAccel),repeatCount:this.getDataOrDefault(n,"repeat",l.repeatCount),swap:this.getDataOrDefault(n,"swap",l.swap),appendBack:this.getDataOrDefault(n,"appendback",l.appendBack),currentIndex:this.getDataOrDefault(n,"start-index",l.currentIndex),animationDirection:this.getDataOrDefault(n,"ani-direction",l.animationDirection),startNow:this.getDataOrDefault(n,"start-now",l.startNow),tileSelector:this.getDataOrDefault(n,"tile-selector",l.tileSelector),tileFaceSelector:this.getDataOrDefault(n,"face-selector",l.tileFaceSelector),bounce:this.getDataOrDefault(n,"bounce",l.bounce),bounceDirections:this.getDataOrDefault(n,"bounce-dir",l.bounceDirections),bounceFollowsMove:this.getDataOrDefault(n,"bounce-follows",l.bounceFollowsMove),click:this.getDataOrDefault(n,"click",l.click),link:this.getDataOrDefault(n,"link",l.link),newWindow:this.getDataOrDefault(n,"new-window",l.newWindow),alwaysTrigger:this.getDataOrDefault(n,"always-trigger",l.alwaysTrigger),flipListOnHover:this.getDataOrDefault(n,"flip-onhover",l.flipListOnHover),pauseOnHover:this.getDataOrDefault(n,"pause-onhover",l.pauseOnHover),playOnHover:this.getDataOrDefault(n,"play-onhover",l.playOnHover),onHoverDelay:this.getDataOrDefault(n,"hover-delay",l.onHoverDelay),onHoverOutDelay:this.getDataOrDefault(n,"hoverout-delay",l.onHoverOutDelay),noHAflipOpacity:this.getDataOrDefault(n,"flip-opacity",l.noHAflipOpacity),useTranslate:this.getDataOrDefault(n,"use-translate",l.useTranslate),runEvents:false,isReversed:false,loopCount:0,contentModules:[],listData:[],height:n.height(),width:n.width(),tempValues:{}}}else{k=f.extend(true,{runEvents:false,isReversed:false,loopCount:0,contentModules:[],listData:[],height:n.height(),width:n.width(),tempValues:{}},l)}k.useTranslate=k.useTranslate&&k.useHardwareAccel&&g.capabilities.canTransform&&g.capabilities.canTransition;k.margin=(k.direction==="vertical")?k.height/2:k.width/2;k.stops=(typeof(l.stops)==="object"&&(l.stops instanceof Array))?l.stops:(""+k.stops).split(",");if(k.stops.length===1){k.stops.push("0px")}var j=k.swap instanceof Array?k.swap:k.swap.replace(" ","").split(",");var p=q?this.getDataOrDefault(n,"swap-front",l.swapFront):l.swapFront;var r=q?this.getDataOrDefault(n,"swap-back",l.swapBack):l.swapBack;if(p instanceof Array){k.swapFront=p}else{k.swapFront=p==="-"?j:p.replace(" ","").split(",")}if(r instanceof Array){k.swapBack=r}else{k.swapBack=r==="-"?j:r.replace(" ","").split(",")}var m;for(m=0;m<k.swapFront.length;m++){if(k.swapFront[m].length>0&&f.inArray(k.swapFront[m],j)===-1){j.push(k.swapFront[m])}}for(m=0;m<k.swapBack.length;m++){if(k.swapBack[m].length>0&&f.inArray(k.swapBack[m],j)===-1){j.push(k.swapBack[m])}}k.swap=j;for(m=0;m<j.length;m++){if(j[m].length>0){var o=f.fn.liveTile.contentModules.hasContentModule(j[m]);if(o>-1){k.contentModules.push(f.fn.liveTile.contentModules.modules[o])}}}k.initDelay=q?this.getDataOrDefault(n,"initdelay",l.initDelay):l.initDelay;if(k.delay<-1){k.delay=l.triggerDelay(1)}else{if(k.delay<0){k.delay=3500+(Math.random()*4501)}}if(k.initDelay<0){k.initDelay=k.delay}var t={};for(m=0;m<k.contentModules.length;m++){f.extend(t,k.contentModules[m].data)}f.extend(t,l,k);var s;if(t.mode==="flip-list"){s=n.find(t.tileSelector).not(".tile-title");s.each(function(u,w){var x=f(w);var v={direction:q?i.getDataOrDefault(x,"direction",t.direction):t.direction,newWindow:q?i.getDataOrDefault(x,"new-window",false):false,link:q?i.getDataOrDefault(x,"link",""):"",faces:{$front:null,$back:null},height:x.height(),width:x.width(),isReversed:false};v.margin=v.direction==="vertical"?v.height/2:v.width/2;t.listData.push(v)})}else{if(t.mode==="carousel"){t.stack=true;s=n.find(t.tileSelector).not(".tile-title");s.each(function(u,w){var x=f(w);var v={bounce:q?i.getDataOrDefault(x,"bounce",false):false,bounceDirections:q?i.getDataOrDefault(x,"bounce-dir","all"):"all",link:q?i.getDataOrDefault(x,"link",""):"",newWindow:q?i.getDataOrDefault(x,"new-window",false):false,animationDirection:q?i.getDataOrDefault(x,"ani-direction",""):"",direction:q?i.getDataOrDefault(x,"direction",""):""};t.listData.push(v)})}}for(m=0;m<k.contentModules.length;m++){if(typeof(t.contentModules[m].initData)==="function"){t.contentModules[m].initData(t,n)}}k=null;return t},prepTile:function(o,m){o.addClass(m.mode);var p={$tileFaces:null,$listTiles:null,$front:null,$back:null};var r,n,q,s;switch(m.mode){case"fade":p.$tileFaces=o.find(m.tileFaceSelector).not(".tile-title");p.$front=(m.faces.$front!=null&&m.faces.$front.length>0)?m.faces.$front.addClass("fade-front"):p.$tileFaces.filter(":first").addClass("fade-front");if(m.faces.$back!=null&&m.faces.$back.length>0){p.$back=m.faces.$back.addClass("fade-back")}else{if(p.$tileFaces.length>1){p.$back=p.$tileFaces.filter(":last").addClass("fade-back")}else{if(m.appendBack){p.$back=f('<div class="fade-back"></div>').appendTo(o)}else{p.$back=f("<div></div>")}}}break;case"slide":p.$tileFaces=o.find(m.tileFaceSelector).not(".tile-title");p.$front=(m.faces.$front!=null&&m.faces.$front.length>0)?m.faces.$front.addClass("slide-front"):p.$tileFaces.filter(":first").addClass("slide-front");if(m.faces.$back!=null&&m.faces.$back.length>0){p.$back=m.faces.$back.addClass("slide-back")}else{if(p.$tileFaces.length>1){p.$back=p.$tileFaces.filter(":last").addClass("slide-back")}else{if(m.appendBack){p.$back=f('<div class="slide-back"></div>').appendTo(o)}else{p.$back=f("<div></div>")}}}if(m.stack==true){var k,l;if(m.direction==="vertical"){k="top",l="translate(0%, -100%) translateZ(0)"}else{k="left",l="translate(-100%, 0%) translateZ(0)"}q={};if(m.useTranslate){b.appendStyleProperties(q,["transform"],[l])}else{q[k]="-100%"}p.$back.css(q)}o.data("metrojs.tile",{animating:false});if(g.capabilities.canTransition&&m.useHardwareAccel){o.addClass("ha");p.$front.addClass("ha");p.$back.addClass("ha")}break;case"carousel":p.$listTiles=o.find(m.tileSelector).not(".tile-title");var j=p.$listTiles.length;o.data("metrojs.tile",{animating:false});m.currentIndex=Math.min(m.currentIndex,j-1);p.$listTiles.each(function(t,x){var y=f(x).addClass("slide");var v=m.listData[t],w=typeof(v.animationDirection)==="string"&&v.animationDirection.length>0?v.animationDirection:m.animationDirection,u=typeof(v.direction)==="string"&&v.direction.length>0?v.direction:m.direction;if(t==m.currentIndex){y.addClass("active")}else{if(w==="forward"){if(u==="vertical"){s=m.useTranslate?b.appendStyleProperties({},["transform"],["translate(0%, 100%) translateZ(0)"]):{left:"0%",top:"100%"};y.css(s)}else{s=m.useTranslate?b.appendStyleProperties({},["transform"],["translate(100%, 0%) translateZ(0)"]):{left:"100%",top:"0%"};y.css(s)}}else{if(w==="backward"){if(u==="vertical"){s=m.useTranslate?b.appendStyleProperties({},["transform"],["translate(0%, -100%) translateZ(0)"]):{left:"0%",top:"-100%"};y.css(s)}else{s=m.useTranslate?b.appendStyleProperties({},["transform"],["translate(-100%, 0%) translateZ(0)"]):{left:"-100%",top:"0%"};y.css(s)}}}}i.bindLink(y,v);if(m.useHardwareAccel&&g.capabilities.canTransition){i.bindBounce(y,v)}y=null;v=null});if(g.capabilities.canFlip3d&&m.useHardwareAccel){o.addClass("ha");p.$listTiles.addClass("ha")}break;case"flip-list":p.$listTiles=o.find(m.tileSelector).not(".tile-title");p.$listTiles.each(function(t,y){var A=f(y).addClass("tile-"+(t+1));var z=A.find(m.tileFaceSelector).filter(":first").addClass("flip-front").css({margin:"0px"});if(A.find(m.tileFaceSelector).length===1&&m.appendBack==true){A.append("<div></div>")}var x=A.find(m.tileFaceSelector).filter(":last").addClass("flip-back").css({margin:"0px"});m.listData[t].faces.$front=z;m.listData[t].faces.$back=x;A.data("metrojs.tile",{animating:false,count:1,completeTimeout:null,flCompleteTimeout:null,index:t});var w=A.data("metrojs.tile");if(g.capabilities.canFlip3d&&m.useHardwareAccel){A.addClass("ha");z.addClass("ha");x.addClass("ha");r=m.listData[t].direction==="vertical"?"rotateX(180deg)":"rotateY(180deg)";q=b.appendStyleProperties({},["transform"],[r]);x.css(q)}else{n=(m.listData[t].direction==="vertical")?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"};q=(m.listData[t].direction==="vertical")?{height:"0px",width:"100%",marginTop:m.listData[t].margin+"px",opacity:m.noHAflipOpacity}:{height:"100%",width:"0px",marginLeft:m.listData[t].margin+"px",opacity:m.noHAflipOpacity};z.css(n);x.css(q)}var u=function(){w.count++;if(w.count>=c){w.count=1}};if(m.flipListOnHover){var v=m.flipListOnHoverEvent+".liveTile";z.bind(v,function(){i.flip(A,w.count,m,u)});x.bind(v,function(){i.flip(A,w.count,m,u)})}if(m.listData[t].link.length>0){A.css({cursor:"pointer"}).bind("click.liveTile",function(){if(m.listData[t].newWindow){window.open(m.listData[t].link)}else{window.location=m.listData[t].link}})}});break;case"flip":p.$tileFaces=o.find(m.tileFaceSelector).not(".tile-title");p.$front=(m.faces.$front!=null&&m.faces.$front.length>0)?m.faces.$front.addClass("flip-front"):p.$tileFaces.filter(":first").addClass("flip-front");if(m.faces.$back!=null&&m.faces.$back.length>0){p.$back=m.faces.$back.addClass("flip-back")}else{if(p.$tileFaces.length>1){p.$back=p.$tileFaces.filter(":last").addClass("flip-back")}else{if(m.appendBack){p.$back=f('<div class="flip-back"></div>').appendTo(o)}else{p.$back=f("<div></div>")}}}o.data("metrojs.tile",{animating:false});if(g.capabilities.canFlip3d&&m.useHardwareAccel){o.addClass("ha");p.$front.addClass("ha");p.$back.addClass("ha");r=m.direction==="vertical"?"rotateX(180deg)":"rotateY(180deg)";q=b.appendStyleProperties({},["transform"],[r]);p.$back.css(q)}else{n=(m.direction==="vertical")?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"};q=(m.direction==="vertical")?{height:"0%",width:"100%",marginTop:m.margin+"px",opacity:"0"}:{height:"100%",width:"0%",marginLeft:m.margin+"px",opacity:"0"};p.$front.css(n);p.$back.css(q)}break}return p},bindPauseOnHover:function(j){(function(){var o=j.data("LiveTile"),r=false,m=false,l=false,q=false,k=(o.pauseOnHoverEvent=="both"||o.pauseOnHoverEvent=="mouseover"||o.pauseOnHoverEvent=="mouseenter"),p=(o.pauseOnHoverEvent=="both"||o.pauseOnHoverEvent=="mouseout"||o.pauseOnHoverEvent=="mouseleave");o.pOnHoverMethods={pause:function(){o.timer.pause();if(o.mode==="flip-list"){o.faces.$listTiles.each(function(t,s){window.clearTimeout(f(s).data("metrojs.tile").completeTimeout)})}},over:function(t,s){s=typeof(s)=="undefined"?false:s;if(!s&&l){return}if(r||m){return}if(o.runEvents){m=true;o.eventTimeout=window.setTimeout(function(){m=false;if(p){r=true}l=false;o.pOnHoverMethods.pause()},o.onHoverDelay)}},out:function(t,s){s=typeof(s)=="undefined"?false:s;if(!s&&q==true){return}if(m){window.clearTimeout(o.eventTimeout);m=false;return}if(k){if(!r&&!m){return}if(o.runEvents){o.timer.start(o.hasRun?o.delay:o.initDelay)}}else{o.pOnHoverMethods.pause()}r=false;q=false}};if(!g.capabilities.canTouch){if(k){j.bind("mouseover.liveTile",o.pOnHoverMethods.over)}if(p){j.bind("mouseout.liveTile",o.pOnHoverMethods.out)}}else{if(window.PointerEvent||window.MSPointerEvent){var n=window.MSPointerEvent?"MS":"";if(k){j[0].addEventListener(n+"PointerOver",o.pOnHoverMethods.over,false)}if(p){j[0].addEventListener(n+"PointerOut",o.pOnHoverMethods.out,false)}}else{if(k){j.bind("mouseover.liveTile",o.pOnHoverMethods.over);j.bind("touchstart.liveTile",function(s){l=false;o.pOnHoverMethods.over.apply(j[0],[s,true])})}if(p){j.bind("mouseout.liveTile",o.pOnHoverMethods.out);j.bind("touchend.liveTile",function(s){q=false;o.pOnHoverMethods.out.apply(j[0],[s,true])})}}}})()},unbindMsPauseOnHover:function(j,l){if(typeof(l.pOnHoverMethods)!=="undefined"&&(window.PointerEvent||window.MSPointerEvent)){var k=window.MSPointerEvent?"MS":"";j[0].removeEventListener(k+"PointerOver",l.pOnHoverMethods.over,false);j[0].removeEventListener(k+"PointerOut",l.pOnHoverMethods.out,false)}},bindPlayOnHover:function(j,k){(function(){var q=false,m=false,l=false,p=false,o=(k.playOnHoverEvent=="both"||k.playOnHoverEvent=="mouseover"||k.playOnHoverEvent=="mouseenter"),r=(k.playOnHoverEvent=="both"||k.playOnHoverEvent=="mouseout"||k.playOnHoverEvent=="mouseleave");k.onHoverMethods={over:function(u,t){t=typeof(t)=="undefined"?false:t;if(!t&&l){return}if(q||m||(k.bounce&&k.bounceMethods.down!="no")){return}var s=(k.mode=="flip")||(k.startNow?!k.isReversed:k.isReversed);window.clearTimeout(k.eventTimeout);if((k.runEvents&&s)||!k.hasRun){m=true;k.eventTimeout=window.setTimeout(function(){m=false;if(r){q=true}a.play.apply(j[0],[0]);l=false},k.onHoverDelay)}},out:function(t,s){s=typeof(s)=="undefined"?false:s;if(!s&&p==true){return}if(m){window.clearTimeout(k.eventTimeout);m=false;return}if(o){if(!q&&!m){return}}window.clearTimeout(k.eventTimeout);k.eventTimeout=window.setTimeout(function(){var u=(k.mode=="flip")||(k.startNow?k.isReversed:!k.isReversed);if(k.runEvents&&u){a.play.apply(j[0],[0])}p=false;q=false},k.speed+k.onHoverOutDelay)}};if(!g.capabilities.canTouch){if(o){j.bind("mouseenter.liveTile",k.onHoverMethods.over)}if(r){j.bind("mouseleave.liveTile",k.onHoverMethods.out)}}else{if(window.PointerEvent||window.MSPointerEvent){var n=window.MSPointerEvent?"MS":"";if(o){j[0].addEventListener(n+"PointerEnter",k.onHoverMethods.over,false)}if(r){j[0].addEventListener(n+"PointerLeave",k.onHoverMethods.out,false)}}else{if(o){j.bind("touchstart.liveTile",function(s){l=true;k.onHoverMethods.over.apply(j[0],[s,true])});j.bind("mouseenter.liveTile",k.onHoverMethods.over)}if(r){j.bind("touchend.liveTile,touchcancel.liveTile",function(s){p=false;k.onHoverMethods.out.apply(j[0],[s,true])});j.bind("mouseleave.liveTile",k.onHoverMethods.out)}}}})()},unbindMsPlayOnHover:function(j,l){if(typeof(l.onHoverMethods)!=="undefined"&&(window.PointerEvent||window.MSPointerEvent)){var k=window.MSPointerEvent?"MS":"";j[0].removeEventListener(k+"PointerOver",l.onHoverMethods.over,false)}},bindBounce:function(j,k){if(k.bounce){j.addClass("bounce");j.addClass("noselect");(function(){k.bounceMethods={down:"no",threshold:30,zeroPos:{x:0,y:0},eventPos:{x:0,y:0},inTilePos:{x:0,y:0},pointPos:{x:0,y:0},regions:{c:[0,0],tl:[-1,-1],tr:[1,-1],bl:[-1,1],br:[1,1],t:[null,-1],r:[1,null],b:[null,1],l:[-1,null]},targets:{all:["c","t","r","b","l","tl","tr","bl","br"],edges:["c","t","r","b","l"],corners:["c","tl","tr","bl","br"]},hitTest:function(F,q,s,u){var m=k.bounceMethods.regions,o=k.bounceMethods.targets[s],B=0,A=null,v=null,E={hit:[0,0],name:"c"};if(g.capabilities.isOldAndroid||!g.capabilities.canTransition){return E}if(typeof(o)=="undefined"){if(typeof(s)==="string"){o=s.split(",")}if(f.isArray(o)&&f.inArray("c")==-1){u=0;E=null}}var t=F.width(),C=F.height(),p=[t*u,C*u],z=q.x-(t*0.5),y=q.y-(C*0.5),D=[z>0?(Math.abs(z)<=p[0]?0:1):(Math.abs(z)<=p[0]?0:-1),y>0?(Math.abs(y)<=p[1]?0:1):(Math.abs(y)<=p[1]?0:-1)];for(;B<o.length;B++){if(A!=null){return A}var x=o[B],n=m[x];if(x=="*"){x=o[B+1];return{region:m[x],name:x}}if(D[0]==n[0]&&D[1]==n[1]){A={hit:n,name:x}}else{if((D[0]==n[0]||n[0]==null)&&(D[1]==n[1]||n[1]==null)){v={hit:n,name:x}}}}if(A!=null){return A}else{if(v!=null){return v}else{return E}}},bounceDown:function(q){if(q.target.tagName=="A"&&!f(q).is(".bounce")){return}var t=q.originalEvent&&q.originalEvent.touches?q.originalEvent.touches[0]:q,p=j.offset(),u=window.pageXOffset,s=window.pageYOffset;k.bounceMethods.pointPos={x:t.pageX,y:t.pageY};k.bounceMethods.inTilePos={x:t.pageX-p.left,y:t.pageY-p.top};if(!k.$tileParent){k.$tileParent=j.parent()}var o=k.$tileParent.offset();k.bounceMethods.eventPos={x:(p.left-o.left)+(j.width()/2),y:(p.top-o.top)+(j.height()/2)};var m=k.bounceMethods.hitTest(j,k.bounceMethods.inTilePos,k.bounceDirections,0.25);if(m==null){k.bounceMethods.down="no"}else{if(window.PointerEvent||window.MSPointerEvent){var r=window.MSPointerEvent?"MS":"";document.addEventListener(r+"PointerUp",k.bounceMethods.bounceUp,false);j[0].addEventListener(r+"PointerUp",k.bounceMethods.bounceUp,false);document.addEventListener(r+"PointerCancel",k.bounceMethods.bounceUp,false);if(k.bounceFollowsMove){j[0].addEventListener(r+"PointerMove",k.bounceMethods.bounceMove,false)}}else{f(document).bind("mouseup.liveTile, touchend.liveTile, touchcancel.liveTile, dragstart.liveTile",k.bounceMethods.bounceUp);if(k.bounceFollowsMove){j.bind("touchmove.liveTile",k.bounceMethods.bounceMove);j.bind("mousemove.liveTile",k.bounceMethods.bounceMove)}}var n="bounce-"+m.name;j.addClass(n);k.bounceMethods.down=n;k.bounceMethods.downPcss=b.appendStyleProperties({},["perspective-origin"],[k.bounceMethods.eventPos.x+"px "+k.bounceMethods.eventPos.y+"px"]);k.$tileParent.css(k.bounceMethods.downPcss)}},bounceUp:function(){if(k.bounceMethods.down!="no"){k.bounceMethods.unBounce();if(window.PointerEvent||window.MSPointerEvent){var m=window.MSPointerEvent?"MS":"";document.removeEventListener(m+"PointerUp",k.bounceMethods.bounceUp,false);j[0].removeEventListener(m+"PointerUp",k.bounceMethods.bounceUp,false);document.removeEventListener(m+"PointerCancel",k.bounceMethods.bounceUp,false);if(k.bounceFollowsMove){j[0].removeEventListener(m+"PointerMove",k.bounceMethods.bounceMove,false)}}else{f(document).unbind("mouseup.liveTile, touchend.liveTile, touchcancel.liveTile, dragstart.liveTile",k.bounceMethods.bounceUp)}if(k.bounceFollowsMove){j.unbind("touchmove.liveTile",k.bounceMethods.bounceMove);j.unbind("mousemove.liveTile",k.bounceMethods.bounceMove)}}},bounceMove:function(p){if(k.bounceMethods.down!="no"){var n=p.originalEvent&&p.originalEvent.touches?p.originalEvent.touches[0]:p,m=Math.abs(n.pageX-k.bounceMethods.pointPos.x),q=Math.abs(n.pageY-k.bounceMethods.pointPos.y);if(m>k.bounceMethods.threshold||q>k.bounceMethods.threshold){var o=k.bounceMethods.down;k.bounceMethods.bounceDown(p);if(o!=k.bounceMethods.down){j.removeClass(o)}}}},unBounce:function(){j.removeClass(k.bounceMethods.down);if(typeof(k.bounceMethods.downPcss)=="object"){var n=["perspective-origin","perspective-origin-x","perspective-origin-y"],m=["","",""];k.bounceMethods.downPcss=b.appendStyleProperties({},n,m);window.setTimeout(function(){k.$tileParent.css(k.bounceMethods.downPcss)},200)}k.bounceMethods.down="no";k.bounceMethods.inTilePos=k.bounceMethods.zeroPos;k.bounceMethods.eventPos=k.bounceMethods.zeroPos}};if(window.PointerEvent||window.MSPointerEvent){var l=window.MSPointerEvent?"MS":"";j[0].addEventListener(l+"PointerDown",k.bounceMethods.bounceDown,false)}else{if(g.capabilities.canTouch){j.bind("touchstart.liveTile",k.bounceMethods.bounceDown);j.bind("mousedown.liveTile",k.bounceMethods.bounceDown)}else{j.bind("mousedown.liveTile",k.bounceMethods.bounceDown)}}})()}},unbindMsBounce:function(j,l){if(l.bounce&&(window.PointerEvent||window.MSPointerEvent)){var k=window.MSPointerEvent?"MS":"";j[0].removeEventListener(k+"PointerDown",l.bounceMethods.bounceDown,false);j[0].removeEventListener(k+"PointerCancel",l.bounceMethods.bounceUp,false);j[0].removeEventListener(k+"PointerOut",l.bounceMethods.bounceUp,false)}},bindLink:function(j,k){if(k.link.length>0){j.css({cursor:"pointer"}).bind("click.liveTile",function(l){if(l.target.tagName=="A"&&!f(l).is(".live-tile,.slide,.flip")){return}if(k.newWindow){window.open(k.link)}else{window.location=k.link}})}},runContenModules:function(n,l,o,k){for(var m=0;m<n.contentModules.length;m++){var j=n.contentModules[m];if(typeof(j.action)=="function"){j.action(n,l,o,k)}}},fade:function(m,n,o){var q=typeof(o)==="object"?o:m.data("LiveTile"),l=function(){if(q.timer.repeatCount>0||q.timer.repeatCount==-1){if(q.timer.count!=q.timer.repeatCount){q.timer.start(q.delay)}}};if(typeof(q)==="undefined"){d(f.fn.liveTile.defaults.rebindMessage);return}if(q.faces.$front.is(":animated")){return}q.timer.pause();var k=q.loopCount+1;q.isReversed=k%2===0;var p=q.animationStarting.call(m[0],q,q.faces.$front,q.faces.$back);if(typeof(p)!="undefined"&&p==false){l();return}q.loopCount=k;var j=function(){l();i.runContenModules(q,q.faces.$front,q.faces.$back);q.animationComplete.call(m[0],q,q.faces.$front,q.faces.$back)};if(q.isReversed){q.faces.$front.fadeIn(q.speed,q.noHaTransFunc,j)}else{q.faces.$front.fadeOut(q.speed,q.noHaTransFunc,j)}},slide:function(m,s,J,u,p){var x=typeof(J)==="object"?J:m.data("LiveTile"),n=m.data("metrojs.tile");if(typeof(x)==="undefined"){d(f.fn.liveTile.defaults.rebindMessage);return}if(n.animating==true||m.is(":animated")){x=null;n=null;return}var I=function(){if(x.timer.repeatCount>0||x.timer.repeatCount==-1){if(x.timer.count!=x.timer.repeatCount){x.timer.start(x.delay)}}};if(x.mode!=="carousel"){x.isReversed=x.currentIndex%2!==0;x.timer.pause();var o=x.animationStarting.call(m[0],x,x.faces.$front,x.faces.$back);if(typeof(o)!="undefined"&&o==false){I();return}x.loopCount=x.loopCount+1}else{x.isReversed=true}var F;if(typeof(x.tempValues.direction)==="string"&&x.tempValues.direction.length>0){F=x.tempValues.direction}else{F=x.direction}x.tempValues.direction=null;var v={},C={},B=typeof(u)==="undefined"?x.currentIndex:u,z=f.trim(x.stops[Math.min(B,x.stops.length-1)]),A=z.indexOf("px"),q=0,t=0,y=(F==="vertical")?x.height:x.width,H=(F==="vertical")?"top":"left",r=x.stack==true;var K=function(){if(typeof(p)==="undefined"){x.currentIndex=x.currentIndex+1;if(x.currentIndex>x.stops.length-1){x.currentIndex=0}}else{p()}if(x.mode!="carousel"){I()}i.runContenModules(x,x.faces.$front,x.faces.$back,x.currentIndex);x.animationComplete.call(m[0],x,x.faces.$front,x.faces.$back);x=null;n=null};if(A>0){t=parseInt(z.substring(0,A),10);q=(t-y)+"px"}else{t=parseInt(z.replace("%",""),10);q=(t-100)+"%"}if(g.capabilities.canTransition&&x.useHardwareAccel){if(typeof(n.animating)!=="undefined"&&n.animating==true){return}n.animating=true;var l=["transition-property","transition-duration","transition-timing-function"],w=[x.useTranslate?"transform":H,x.speed+"ms",x.haTransFunc];w[b.browserPrefix+"transition-property"]=b.browserPrefix+"transform";v=b.appendStyleProperties(v,l,w);C=b.appendStyleProperties(C,l,w);var j=F==="vertical",k=j?"top":"left",G;if(!x.useTranslate){v[k]=z;if(r){C[k]=q}}else{G=j?"translate(0%, "+z+")":"translate("+z+", 0%)";v=b.appendStyleProperties(v,["transform"],[G+"translateZ(0)"]);if(r){G=j?"translate(0%, "+q+")":"translate("+q+", 0%)";C=b.appendStyleProperties(C,["transform"],[G+"translateZ(0)"])}}x.faces.$front.css(v);if(r){x.faces.$back.css(C)}window.clearTimeout(x.completeTimeout);x.completeTimeout=window.setTimeout(function(){n.animating=false;K()},x.speed)}else{v[H]=z;C[H]=q;n.animating=true;var E=x.faces.$front.stop(),D=x.faces.$back.stop();E.animate(v,x.speed,x.noHaTransFunc,function(){n.animating=false;K()});if(r){D.animate(C,x.speed,x.noHaTransFunc,function(){})}}},carousel:function(k,n){var p=k.data("LiveTile");if(typeof(p)==="undefined"){d(f.fn.liveTile.defaults.rebindMessage);return}var l=k.data("metrojs.tile");if(l.animating==true||p.faces.$listTiles.length<=1){l=null;return}var x=function(){if(p.timer.repeatCount>0||p.timer.repeatCount==-1){if(p.timer.count!=p.timer.repeatCount){p.timer.start(p.delay)}}};p.timer.pause();var o=p.faces.$listTiles.filter(".active"),q=p.faces.$listTiles.index(o),A=p.currentIndex,y=A!=q?A:q,t=y+1>=p.faces.$listTiles.length?0:y+1,v=p.listData[t];if(q==t){l=null;o=null;return}var z;if(typeof(p.tempValues.animationDirection)==="string"&&p.tempValues.animationDirection.length>0){z=p.tempValues.animationDirection}else{if(typeof(v.animationDirection)==="string"&&v.animationDirection.length>0){z=v.animationDirection}else{z=p.animationDirection}}p.tempValues.animationDirection=null;var u;if(typeof(p.tempValues.direction)==="string"&&p.tempValues.direction.length>0){u=p.tempValues.direction}else{if(typeof(v.direction)==="string"&&v.direction.length>0){u=v.direction;p.tempValues.direction=u}else{u=p.direction}}var s=p.faces.$listTiles.eq(t),m=p.animationStarting.call(k[0],p,o,s);if(typeof(m)!="undefined"&&m==false){x();return}p.loopCount=p.loopCount+1;var r=b.appendStyleProperties({},["transition-duration"],["0s"]),j=u==="vertical",w;if(z==="backward"){if(!p.useTranslate||!g.capabilities.canTransition){if(j){r.top="-100%";r.left="0%"}else{r.top="0%";r.left="-100%"}p.stops=["100%"]}else{w=j?"translate(0%, -100%)":"translate(-100%, 0%)";r=b.appendStyleProperties(r,["transform"],[w+" translateZ(0)"]);p.stops=["100%"]}p.faces.$front=o;p.faces.$back=s}else{if(!p.useTranslate||!g.capabilities.canTransition){if(j){r.top="100%";r.left="0%"}else{r.top="0%";r.left="100%"}}else{w=j?"translate(0%, 100%)":"translate(100%, 0%)";r=b.appendStyleProperties(r,["transform"],[w+" translateZ(0)"])}p.faces.$front=s;p.faces.$back=o;p.stops=["0%"]}s.css(r);window.setTimeout(function(){o.removeClass("active");s.addClass("active");i.slide(k,n,p,0,function(){p.currentIndex=t;l=null;o=null;s=null;x()})},150)},flip:function(l,q,J,o){var n=l.data("metrojs.tile");if(typeof(n)!=="undefined"&&n.animating==true){n=null;return}var y=typeof(J)==="object"?J:l.data("LiveTile");if(typeof(y)==="undefined"){d(f.fn.liveTile.defaults.rebindMessage);return}var G,F,H,w,z,v,E=typeof(o)==="undefined",r=0,D,I=function(){if(y.timer.repeatCount>0||y.timer.repeatCount==-1){if(y.timer.count!=y.timer.repeatCount){y.timer.start(y.delay)}}};if(E){y.timer.pause();var x=y.loopCount+1;D=x%2===0;y.isReversed=D;G=y.faces.$front;F=y.faces.$back;var j=D?[y,F,G]:[y,G,F];var m=y.animationStarting.apply(l[0],j);if(typeof(m)!="undefined"&&m==false){I();return}H=y.direction;height=y.height;width=y.width;margin=y.margin;y.loopCount=x}else{D=q%2===0;r=n.index;G=y.listData[r].faces.$front;F=y.listData[r].faces.$back;y.listData[r].isReversed=D;H=y.listData[r].direction;height=y.listData[r].height;width=y.listData[r].width;margin=y.listData[r].margin}if(g.capabilities.canFlip3d&&y.useHardwareAccel){w=!D?"180deg":"360deg";z=H==="vertical"?"rotateX("+w+")":"rotateY("+w+")";v=b.appendStyleProperties({},["transform","transition"],[z,"all "+y.speed+"ms "+y.haTransFunc+" 0s"]);var u=!D?"360deg":"540deg";var t=H==="vertical"?"rotateX("+u+")":"rotateY("+u+")";var s=b.appendStyleProperties({},["transform","transition"],[t,"all "+y.speed+"ms "+y.haTransFunc+" 0s"]);G.css(v);F.css(s);var A=function(){n.animating=false;var K,L;if(!D){i.runContenModules(y,F,G,r);if(E){I();y.animationComplete.call(l[0],y,F,G)}else{o(y,F,G)}}else{K=H==="vertical"?"rotateX(0deg)":"rotateY(0deg)";L=b.appendStyleProperties({},["transform","transition"],[K,"all 0s "+y.haTransFunc+" 0s"]);G.css(L);i.runContenModules(y,G,F,r);if(E){I();y.animationComplete.call(l[0],y,G,F)}else{o(y,G,F)}G=null;F=null;y=null;n=null}};if(y.mode==="flip-list"){window.clearTimeout(y.listData[r].completeTimeout);y.listData[r].completeTimeout=window.setTimeout(A,y.speed)}else{window.clearTimeout(y.completeTimeout);y.completeTimeout=window.setTimeout(A,y.speed)}}else{var B=y.speed/2;var k=(H==="vertical")?{height:"0px",width:"100%",marginTop:margin+"px",opacity:y.noHAflipOpacity}:{height:"100%",width:"0px",marginLeft:margin+"px",opacity:y.noHAflipOpacity};var C=(H==="vertical")?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"};var p;if(!D){n.animating=true;G.stop().animate(k,{duration:B});p=function(){n.animating=false;F.stop().animate(C,{duration:B,complete:function(){i.runContenModules(y,F,G,r);if(E){I();y.animationComplete.call(l[0],y,F,G)}else{o(y,F,G)}G=null;F=null;y=null;n=null}})};if(y.mode==="flip-list"){window.clearTimeout(y.listData[n.index].completeTimeout);y.listData[n.index].completeTimeout=window.setTimeout(p,B)}else{window.clearTimeout(y.completeTimeout);y.completeTimeout=window.setTimeout(p,B)}}else{n.animating=true;F.stop().animate(k,{duration:B});p=function(){n.animating=false;G.stop().animate(C,{duration:B,complete:function(){i.runContenModules(y,G,F,r);if(E){I();y.animationComplete.call(l[0],y,G,F)}else{o(y,G,F)}n=null;G=null;F=null}})};if(y.mode==="flip-list"){window.clearTimeout(y.listData[n.index].completeTimeout);y.listData[n.index].completeTimeout=window.setTimeout(p,B)}else{window.clearTimeout(y.completeTimeout);y.completeTimeout=window.setTimeout(p,B)}}}},flipList:function(l,n){var p=l.data("LiveTile"),m=p.speed,j=false,k=function(){if(p.timer.repeatCount>0||p.timer.repeatCount==-1){if(p.timer.count!=p.timer.repeatCount){p.timer.start(p.delay)}}};if(typeof(p)==="undefined"){d(f.fn.liveTile.defaults.rebindMessage);return}p.timer.pause();var o=p.animationStarting.call(l[0],p,null,null);if(typeof(o)!="undefined"&&o==false){k();return}p.loopCount=p.loopCount+1;p.faces.$listTiles.each(function(q,v){var w=f(v),u=w.data("metrojs.tile"),t=p.triggerDelay(q),s=p.speed+Math.max(t,0),r=p.alwaysTrigger;if(!r){r=(Math.random()*351)>150?true:false}if(r){j=true;m=Math.max(s+p.speed,m);window.clearTimeout(u.flCompleteTimeout);u.flCompleteTimeout=window.setTimeout(function(){i.flip(w,u.count,p,function(x){u.count++;if(u.count>=c){u.count=1}w=null;u=null})},s)}});if(j){window.clearTimeout(p.flCompleteTimeout);p.flCompleteTimeout=window.setTimeout(function(){i.runContenModules(p,null,null,-1);p.animationComplete.call(l[0],p,null,null);k()},m+p.speed)}}};var b={stylePrefixes:"Webkit Moz O ms Khtml ".split(" "),domPrefixes:"-webkit- -moz- -o- -ms- -khtml- ".split(" "),browserPrefix:null,appendStyleProperties:function(m,l,j){for(var k=0;k<=l.length-1;k++){m[f.trim(this.browserPrefix+l[k])]=j[k];m[f.trim(l[k])]=j[k]}return m},applyStyleValue:function(l,j,k){l[f.trim(this.browserPrefix+j)]=k;l[j]=k;return l},getBrowserPrefix:function(){if(this.browserPrefix==null){var k="";for(var j=0;j<=this.domPrefixes.length-1;j++){if(typeof(document.body.style[this.domPrefixes[j]+"transform"])!="undefined"){k=this.domPrefixes[j]}}return this.browserPrefix=k}return this.browserPrefix},shuffleArray:function(k){var j=[];while(k.length){j.push(k.splice(Math.random()*k.length,1))}while(j.length){k.push(j.pop())}return k}};var h={moduleName:"custom",customSwap:{data:{customDoSwapFront:function(){return false},customDoSwapBack:function(){return false},customGetContent:function(m,k,l,j){return null}},initData:function(l,k){var j={};j.doSwapFront=f.inArray("custom",l.swapFront)>-1&&l.customDoSwapFront();j.doSwapBack=f.inArray("custom",l.swapBack)>-1&&l.customDoSwapBack();if(typeof(l.customSwap)!=="undefined"){l.customSwap=f.extend(j,l.customSwap)}else{l.customSwap=j}},action:function(m,k,l,j){}},htmlSwap:{moduleName:"html",data:{frontContent:[],frontIsRandom:true,frontIsInGrid:false,backContent:[],backIsRandom:true,backIsInGrid:false},initData:function(l,k){var j={backBag:[],backIndex:0,backStaticIndex:0,backStaticRndm:-1,prevBackIndex:-1,frontBag:[],frontIndex:0,frontStaticIndex:0,frontStaticRndm:-1,prevFrontIndex:-1};if(!l.ignoreDataAttributes){j.frontIsRandom=i.getDataOrDefault(k,"front-israndom",l.frontIsRandom);j.frontIsInGrid=i.getDataOrDefault(k,"front-isingrid",l.frontIsInGrid);j.backIsRandom=i.getDataOrDefault(k,"back-israndom",l.backIsRandom);j.backIsInGrid=i.getDataOrDefault(k,"back-isingrid",l.backIsInGrid)}else{j.frontIsRandom=l.frontIsRandom;j.frontIsInGrid=l.frontIsInGrid;j.backIsRandom=l.backIsRandom;j.backIsInGrid=l.backIsInGrid}j.doSwapFront=f.inArray("html",l.swapFront)>-1&&(l.frontContent instanceof Array)&&l.frontContent.length>0;j.doSwapBack=f.inArray("html",l.swapBack)>-1&&(l.backContent instanceof Array)&&l.backContent.length>0;if(typeof(l.htmlSwap)!=="undefined"){l.htmlSwap=f.extend(j,l.htmlSwap)}else{l.htmlSwap=j}if(l.htmlSwap.doSwapFront){l.htmlSwap.frontBag=this.prepBag(l.htmlSwap.frontBag,l.frontContent,l.htmlSwap.prevFrontIndex);l.htmlSwap.frontStaticRndm=l.htmlSwap.frontBag.pop()}if(l.htmlSwap.doSwapBack){l.htmlSwap.backBag=this.prepBag(l.htmlSwap.backBag,l.backContent,l.htmlSwap.prevBackIndex);l.htmlSwap.backStaticRndm=l.htmlSwap.backBag.pop()}},prepBag:function(n,m,j){n=n||[];var l=0;for(var k=0;k<m.length;k++){if(k!=j||n.length===1){n[l]=k;l++}}return b.shuffleArray(n)},getFrontSwapIndex:function(k){var j=0;if(!k.htmlSwap.frontIsRandom){j=k.htmlSwap.frontIsInGrid?k.htmlSwap.frontStaticIndex:k.htmlSwap.frontIndex}else{if(k.htmlSwap.frontBag.length===0){k.htmlSwap.frontBag=this.prepBag(k.htmlSwap.frontBag,k.frontContent,k.htmlSwap.prevFrontIndex)}if(k.htmlSwap.frontIsInGrid){j=k.htmlSwap.frontStaticRndm}else{j=k.htmlSwap.frontBag.pop()}}return j},getBackSwapIndex:function(k){var j=0;if(!k.htmlSwap.backIsRandom){j=k.htmlSwap.backIsInGrid?k.htmlSwap.backStaticIndex:k.htmlSwap.backIndex}else{if(k.htmlSwap.backBag.length===0){k.htmlSwap.backBag=this.prepBag(k.htmlSwap.backBag,k.backContent,k.htmlSwap.prevBackIndex)}if(k.htmlSwap.backIsInGrid){j=k.htmlSwap.backStaticRndm}else{j=k.htmlSwap.backBag.pop()}}return j},action:function(p,k,o,j){if(!p.htmlSwap.doSwapFront&&!p.htmlSwap.doSwapBack){return}var n=p.mode==="flip-list";var l=0;var m=n?p.listData[Math.max(j,0)].isReversed:p.isReversed;if(n&&j==-1){if(!m){if(p.htmlSwap.doSwapFront){if(p.htmlSwap.frontBag.length===0){p.htmlSwap.frontBag=this.prepBag(p.htmlSwap.frontBag,p.frontContent,p.htmlSwap.frontStaticRndm)}p.htmlSwap.frontStaticRndm=p.htmlSwap.frontBag.pop();p.htmlSwap.frontStaticIndex++;if(p.htmlSwap.frontStaticIndex>=p.frontContent.length){p.htmlSwap.frontStaticIndex=0}}}else{if(p.htmlSwap.doSwapBack){if(p.htmlSwap.backBag.length===0){p.htmlSwap.backBag=this.prepBag(p.htmlSwap.backBag,p.backContent,p.htmlSwap.backStaticRndm)}p.htmlSwap.backStaticRndm=p.htmlSwap.backBag.pop();p.htmlSwap.backStaticIndex++;if(p.htmlSwap.backStaticIndex>=p.backContent.length){p.htmlSwap.backStaticIndex=0}}}return}if(!m){if(!p.htmlSwap.doSwapFront){return}l=this.getFrontSwapIndex(p);p.htmlSwap.prevFrontIndex=l;if(p.mode==="slide"){if(!p.startNow){k.html(p.frontContent[l])}else{o.html(p.frontContent[l])}}else{o.html(p.frontContent[l])}p.htmlSwap.frontIndex++;if(p.htmlSwap.frontIndex>=p.frontContent.length){p.htmlSwap.frontIndex=0}if(!n){p.htmlSwap.frontStaticIndex++;if(p.htmlSwap.frontStaticIndex>=p.frontContent.length){p.htmlSwap.frontStaticIndex=0}}else{}}else{if(!p.htmlSwap.doSwapBack){return}l=this.getBackSwapIndex(p);p.htmlSwap.prevBackIndex=l;o.html(p.backContent[p.htmlSwap.backIndex]);p.htmlSwap.backIndex++;if(p.htmlSwap.backIndex>=p.backContent.length){p.htmlSwap.backIndex=0}if(!n){p.htmlSwap.backStaticIndex++;if(p.htmlSwap.backStaticIndex>=p.backContent.length){p.htmlSwap.backStaticIndex=0}}else{}}}},imageSwap:{moduleName:"image",data:{preloadImages:false,imageCssSelector:">img,>a>img",fadeSwap:false,frontImages:[],frontIsRandom:true,frontIsBackgroundImage:false,frontIsInGrid:false,backImages:null,backIsRandom:true,backIsBackgroundImage:false,backIsInGrid:false},initData:function(m,l){var k={backBag:[],backIndex:0,backStaticIndex:0,backStaticRndm:-1,frontBag:[],frontIndex:0,frontStaticIndex:0,frontStaticRndm:-1,prevBackIndex:-1,prevFrontIndex:-1},j=m.ignoreDataAttributes;if(j){k.imageCssSelector=i.getDataOrDefault(l,"image-css",m.imageCssSelector);k.fadeSwap=i.getDataOrDefault(l,"fadeswap",m.fadeSwap);k.frontIsRandom=i.getDataOrDefault(l,"front-israndom",m.frontIsRandom);k.frontIsInGrid=i.getDataOrDefault(l,"front-isingrid",m.frontIsInGrid);k.frontIsBackgroundImage=i.getDataOrDefault(l,"front-isbg",m.frontIsBackgroundImage);k.backIsRandom=i.getDataOrDefault(l,"back-israndom",m.backIsRandom);k.backIsInGrid=i.getDataOrDefault(l,"back-isingrid",m.backIsInGrid);k.backIsBackgroundImage=i.getDataOrDefault(l,"back-isbg",m.backIsBackgroundImage);k.doSwapFront=f.inArray("image",m.swapFront)>-1&&(m.frontImages instanceof Array)&&m.frontImages.length>0;k.doSwapBack=f.inArray("image",m.swapBack)>-1&&(m.backImages instanceof Array)&&m.backImages.length>0;k.alwaysSwapFront=i.getDataOrDefault(l,"front-alwaysswap",m.alwaysSwapFront);k.alwaysSwapBack=i.getDataOrDefault(l,"back-alwaysswap",m.alwaysSwapBack)}else{k.imageCssSelector=m.imageCssSelector;k.fadeSwap=m.fadeSwap;k.frontIsRandom=m.frontIsRandom;k.frontIsInGrid=m.frontIsInGrid;k.frontIsBackgroundImage=m.frontIsBackgroundImage;k.backIsRandom=m.backIsRandom;k.backIsInGrid=m.backIsInGrid;k.backIsBackgroundImage=m.backIsBackgroundImage;k.doSwapFront=f.inArray("image",m.swapFront)>-1&&(m.frontImages instanceof Array)&&m.frontImages.length>0;k.doSwapBack=f.inArray("image",m.swapBack)>-1&&(m.backImages instanceof Array)&&m.backImages.length>0;k.alwaysSwapFront=m.alwaysSwapFront;k.alwaysSwapBack=m.alwaysSwapBack}if(typeof(m.imgSwap)!=="undefined"){m.imgSwap=f.extend(k,m.imgSwap)}else{m.imgSwap=k}if(m.imgSwap.doSwapFront){m.imgSwap.frontBag=this.prepBag(m.imgSwap.frontBag,m.frontImages,m.imgSwap.prevFrontIndex);m.imgSwap.frontStaticRndm=m.imgSwap.frontBag.pop();if(m.preloadImages){f(m.frontImages).metrojs.preloadImages(function(){})}}if(m.imgSwap.doSwapBack){m.imgSwap.backBag=this.prepBag(m.imgSwap.backBag,m.backImages,m.imgSwap.prevBackIndex);m.imgSwap.backStaticRndm=m.imgSwap.backBag.pop();if(m.preloadImages){f(m.backImages).metrojs.preloadImages(function(){})}}},prepBag:function(n,m,j){n=n||[];var l=0;for(var k=0;k<m.length;k++){if(k!=j||m.length===1){n[l]=k;l++}}return b.shuffleArray(n)},getFrontSwapIndex:function(k){var j=0;if(!k.imgSwap.frontIsRandom){j=k.imgSwap.frontIsInGrid?k.imgSwap.frontStaticIndex:k.imgSwap.frontIndex}else{if(k.imgSwap.frontBag.length===0){k.imgSwap.frontBag=this.prepBag(k.imgSwap.frontBag,k.frontImages,k.imgSwap.prevFrontIndex)}if(k.imgSwap.frontIsInGrid){j=k.imgSwap.frontStaticRndm}else{j=k.imgSwap.frontBag.pop()}}return j},getBackSwapIndex:function(k){var j=0;if(!k.imgSwap.backIsRandom){j=k.imgSwap.backIsInGrid?k.imgSwap.backStaticIndex:k.imgSwap.backIndex}else{if(k.imgSwap.backBag.length===0){k.imgSwap.backBag=this.prepBag(k.imgSwap.backBag,k.backImages,k.imgSwap.prevBackIndex)}if(k.imgSwap.backIsInGrid){j=k.imgSwap.backStaticRndm}else{j=k.imgSwap.backBag.pop()}}return j},setImageProperties:function(m,n,k){var l={},j={};if(typeof(n.src)!=="undefined"){if(!k){j.src=n.src}else{l.backgroundImage="url('"+n.src+"')"}}if(typeof(n.alt)!=="undefined"){j.alt=n.alt}if(typeof(n.css)==="object"){m.css(f.extend(l,n.css))}else{m.css(l)}if(typeof(n.attr)==="object"){m.attr(f.extend(j,n.attr))}else{m.attr(j)}},action:function(q,m,p,t){if(!q.imgSwap.doSwapFront&&!q.imgSwap.doSwapBack){return}var k=q.mode==="flip-list",r=q.mode=="slide",u=0,l=k?q.listData[Math.max(t,0)].isReversed:q.isReversed;if(k&&t==-1){if(q.alwaysSwapFront||!l){if(q.imgSwap.doSwapFront){if(q.imgSwap.frontBag.length===0){q.imgSwap.frontBag=this.prepBag(q.imgSwap.frontBag,q.frontImages,q.imgSwap.frontStaticRndm)}q.imgSwap.frontStaticRndm=q.imgSwap.frontBag.pop();q.imgSwap.frontStaticIndex++;if(q.imgSwap.frontStaticIndex>=q.frontImages.length){q.imgSwap.frontStaticIndex=0}}}if(q.alwaysSwapBack||l){if(q.imgSwap.doSwapBack){if(q.imgSwap.backBag.length===0){q.imgSwap.backBag=this.prepBag(q.imgSwap.backBag,q.backImages,q.imgSwap.backStaticRndm)}q.imgSwap.backStaticRndm=q.imgSwap.backBag.pop();q.imgSwap.backStaticIndex++;if(q.imgSwap.backStaticIndex>=q.backImages.length){q.imgSwap.backStaticIndex=0}}}return}var s,j,o,n;if(q.alwaysSwapFront||!l){if(!q.imgSwap.doSwapFront){return}u=this.getFrontSwapIndex(q);q.imgSwap.prevFrontIndex=u;s=(q.mode==="slide")?m:p;j=s.find(q.imgSwap.imageCssSelector);o=typeof(q.frontImages[u])==="object"?q.frontImages[u]:{src:q.frontImages[u]};n=function(w){var v=q.imgSwap.frontIsBackgroundImage;if(typeof(w)=="function"){if(v){window.setTimeout(w,100)}else{j[0].onload=w}}h.imageSwap.setImageProperties(j,o,v)};if(q.fadeSwap){j.fadeOut(function(){n(function(){j.fadeIn()})})}else{n()}q.imgSwap.frontIndex++;if(q.imgSwap.frontIndex>=q.frontImages.length){q.imgSwap.frontIndex=0}if(!k){q.imgSwap.frontStaticIndex++;if(q.imgSwap.frontStaticIndex>=q.frontImages.length){q.imgSwap.frontStaticIndex=0}}else{}}if(q.alwaysSwapBack||l){if(!q.imgSwap.doSwapBack){return}u=this.getBackSwapIndex(q);q.imgSwap.prevBackIndex=u;s=p;j=s.find(q.imgSwap.imageCssSelector);o=typeof(q.backImages[u])==="object"?q.backImages[u]:{src:q.backImages[u]};n=function(){h.imageSwap.setImageProperties(j,o,q.imgSwap.backIsBackgroundImage)};if(q.fadeSwap){j.fadeOut(function(){n(function(){j.fadeIn()})})}else{n()}q.imgSwap.backIndex++;if(q.imgSwap.backIndex>=q.backImages.length){q.imgSwap.backIndex=0}if(!k){q.imgSwap.backStaticIndex++;if(q.imgSwap.backStaticIndex>=q.backImages.length){q.imgSwap.backStaticIndex=0}}else{}}}}};f.fn.metrojs.TileTimer=function(k,l,j){this.timerId=null;this.interval=k;this.action=l;this.count=0;this.repeatCount=typeof(j)==="undefined"?0:j;this.start=function(m){window.clearTimeout(this.timerId);var n=this;this.timerId=window.setTimeout(function(){n.tick.call(n,k)},m)};this.tick=function(m){this.action(this.count+1);this.count++;if(this.count>=c){this.count=0}if(this.repeatCount>0||this.repeatCount==-1){if(this.count!=this.repeatCount){this.start(m)}else{this.stop()}}};this.stop=function(){this.timerId=window.clearTimeout(this.timerId);this.reset()};this.resume=function(){if(this.repeatCount>0||this.repeatCount==-1){if(this.count!=this.repeatCount){this.start(k)}}};this.pause=function(){this.timerId=window.clearTimeout(this.timerId)};this.reset=function(){this.count=0};this.restart=function(m){this.stop();this.start(m)}};jQuery.fn.metrojs.theme={loadDefaultTheme:function(k){if(typeof(k)==="undefined"||k==null){k=jQuery.fn.metrojs.theme.defaults}else{var m=jQuery.fn.metrojs.theme.defaults;jQuery.extend(m,k);k=m}var j=typeof(window.localStorage)!=="undefined";var l=function(n){return(typeof(window.localStorage[n])!=="undefined"&&window.localStorage[n]!=null)};if(j&&(!l("Metro.JS.AccentColor")||!l("Metro.JS.BaseAccentColor"))){window.localStorage["Metro.JS.AccentColor"]=k.accentColor;window.localStorage["Metro.JS.BaseAccentColor"]=k.baseTheme;jQuery(k.accentCssSelector).addClass(k.accentColor).data("accent",k.accentColor);jQuery(k.baseThemeCssSelector).addClass(k.baseTheme);if(typeof(k.loaded)==="function"){k.loaded(k.baseTheme,k.accentColor)}if(typeof(k.preloadAltBaseTheme)!=="undefined"&&k.preloadAltBaseTheme){jQuery([(k.baseTheme=="dark")?k.metroLightUrl:k.metroDarkUrl]).metrojs.preloadImages(function(){})}}else{if(j){k.accentColor=window.localStorage["Metro.JS.AccentColor"];k.baseTheme=window.localStorage["Metro.JS.BaseAccentColor"];jQuery(k.accentCssSelector).addClass(k.accentColor).data("accent",k.accentColor);jQuery(k.baseThemeCssSelector).addClass(k.baseTheme);if(typeof(k.loaded)==="function"){k.loaded(k.baseTheme,k.accentColor)}}else{jQuery(k.accentCssSelector).addClass(k.accentColor).data("accent",k.accentColor);jQuery(k.baseThemeCssSelector).addClass(k.baseTheme);if(typeof(k.loaded)==="function"){k.loaded(k.baseTheme,k.accentColor)}if(typeof(k.preloadAltBaseTheme)!=="undefined"&&k.preloadAltBaseTheme){jQuery([(k.baseTheme=="dark")?k.metroLightUrl:k.metroDarkUrl]).metrojs.preloadImages(function(){})}}}},applyTheme:function(l,j,o){if(typeof(o)==="undefined"||o==null){o=jQuery.fn.metrojs.theme.defaults}else{var p=jQuery.fn.metrojs.theme.defaults;o=jQuery.extend({},p,o)}if(typeof(l)!=="undefined"&&l!=null){if(typeof(window.localStorage)!=="undefined"){window.localStorage["Metro.JS.BaseAccentColor"]=l}var m=jQuery(o.baseThemeCssSelector);if(m.length>0){if(l=="dark"){m.addClass("dark").removeClass("light")}else{if(l=="light"){m.addClass("light").removeClass("dark")}}}}if(typeof(j)!=="undefined"&&j!=null){if(typeof(window.localStorage)!=="undefined"){window.localStorage["Metro.JS.AccentColor"]=j}var k=jQuery(o.accentCssSelector);if(k.length>0){var n=false;k.each(function(){jQuery(this).addClass(j);var r=jQuery(this).data("accent");if(r!=j){var q=jQuery(this).attr("class").replace(r,"");q=q.replace(/(\s)+/," ");jQuery(this).attr("class",q);jQuery(this).data("accent",j);n=true}});if(n&&typeof(o.accentPicked)==="function"){o.accentPicked(j)}}}},appendAccentColors:function(n){if(typeof(n)==="undefined"||n==null){n=jQuery.fn.metrojs.theme.defaults}else{var o=jQuery.fn.metrojs.theme.defaults;n=jQuery.extend({},o,n)}var k="";var j=n.accentColors;var m=n.accentListTemplate;for(var l=0;l<j.length;l++){k+=m.replace(/\{0\}/g,j[l])}f(k).appendTo(n.accentListContainer)},appendBaseThemes:function(n){if(typeof(n)==="undefined"||n==null){n=jQuery.fn.metrojs.theme.defaults}else{var o=jQuery.fn.metrojs.theme.defaults;n=jQuery.extend({},o,n)}var k="",j=n.baseThemes,m=n.baseThemeListTemplate;for(var l=0;l<j.length;l++){k+=m.replace(/\{0\}/g,j[l])}f(k).appendTo(n.baseThemeListContainer)},defaults:{baseThemeCssSelector:"body",accentCssSelector:".tiles",accentColor:"blue",baseTheme:"dark",accentColors:["amber","blue","brown","cobalt","crimson","cyan","magenta","lime","indigo","green","emerald","mango","mauve","olive","orange","pink","red","sienna","steel","teal","violet","yellow"],baseThemes:["light","dark"],accentListTemplate:"<li><a href='javascript:;' title='{0}' class='accent {0}'></a></li>",accentListContainer:"ul.theme-options,.theme-options>ul",baseThemeListTemplate:"<li><a href='javascript:;' title='{0}' class='accent {0}'></a></li>",baseThemeListContainer:"ul.base-theme-options,.base-theme-options>ul"}};jQuery.fn.applicationBar=function(k){var m=typeof(jQuery.fn.metrojs.theme)!=="undefined"?jQuery.fn.metrojs.theme.defaults:{};jQuery.extend(m,jQuery.fn.applicationBar.defaults,k);if(typeof(jQuery.fn.metrojs.theme)!="undefined"){var n=jQuery.fn.metrojs.theme;if(m.shouldApplyTheme){n.loadDefaultTheme(m)}var j=m.accentListContainer.replace(","," a,")+" a";var o=function(){var q=jQuery(this).attr("class").replace("accent","").replace(" ","");n.applyTheme(null,q,m);if(typeof(m.accentPicked)=="function"){m.accentPicked(q)}};var l=m.baseThemeListContainer.replace(","," a,")+" a";var p=function(){var q=jQuery(this).attr("class").replace("accent","").replace(" ","");n.applyTheme(q,null,m);if(typeof(m.themePicked)=="function"){m.themePicked(q)}};if(typeof(f.fn.on)==="function"){f(this).on("click.appBar",j,o);f(this).on("click.appBar",l,p)}else{f(j).live("click.appBar",o);f(l).live("click.appBar",p)}}return f(this).each(function(q,s){var t=f(s),r=f.extend({},m);if(r.collapseHeight=="auto"){r.collapseHeight=f(this).outerHeight()}if(navigator.userAgent.match(/(Android|webOS|iPhone|iPod|BlackBerry|PIE|IEMobile)/i)){if(!navigator.userAgent.match(/(IEMobile\/1)/i)&&!navigator.userAgent.match(/(iPhone OS [56789])/i)){t.css({position:"absolute",bottom:"0px"})}}r.slideOpen=function(){if(!t.hasClass("expanded")){r.animateAppBar(false)}};r.slideClosed=function(){if(t.hasClass("expanded")){r.animateAppBar(true)}};r.animateAppBar=function(w){var u=w?r.collapseHeight:r.expandHeight,v;if(w){v=m.collapse();if(typeof(v)!="undefined"&&v===false){return}t.removeClass("expanded")}else{v=m.expand();if(typeof(v)!="undefined"&&v===false){return}if(!t.hasClass("expanded")){t.addClass("expanded")}}t.stop().animate({height:u},{duration:r.duration},function(){if(w){m.collapsed()}else{m.expanded()}})};t.data("ApplicationBar",r);t.find(m.handleSelector).click(function(){r.animateAppBar(t.hasClass("expanded"))});if(r.bindKeyboard==true){jQuery(document.documentElement).keyup(function(u){if(u.keyCode==38){if(u.target&&u.target.tagName.match(/INPUT|TEXTAREA|SELECT/i)==null){if(!t.hasClass("expanded")){r.animateAppBar(false)}}}else{if(u.keyCode==40){if(u.target&&u.target.tagName.match(/INPUT|TEXTAREA|SELECT/i)==null){if(t.hasClass("expanded")){r.animateAppBar(true)}}}}})}})};jQuery.fn.applicationBar.defaults={applyTheme:true,themePicked:function(j){},accentPicked:function(j){},loaded:function(k,j){},duration:300,expandHeight:"320px",collapseHeight:"auto",bindKeyboard:true,handleSelector:"a.etc",metroLightUrl:"images/metroIcons_light.jpg",metroDarkUrl:"images/metroIcons.jpg",preloadAltBaseTheme:false,expand:function(){},collapse:function(){},expanded:function(){},collapsed:function(){}};f.fn.metrojs.preloadImages=function(l){var k=f(this).toArray();var j=f("<img style='display:none;' />").appendTo("body");f(this).each(function(){var m=this;if(typeof(this)=="object"){m=this.src}j.attr({src:m}).load(function(){for(var n=0;n<k.length;n++){if(k[n]==element){k.splice(n,1)}}if(k.length==0){l()}})});j.remove()};f.fn.metrojs.MetroModernizr=function(q){if(typeof(q)==="undefined"){q={useHardwareAccel:true,useModernizr:typeof(window.Modernizr)!=="undefined"}}this.isOldJQuery=/^1\.[0123]/.test(f.fn.jquery),this.isOldAndroid=(function(){try{var x=navigator.userAgent;if(x.indexOf("Android")>=0){var w=parseFloat(x.slice(x.indexOf("Android")+8));if(w<2.3){return true}}}catch(y){f.error(y)}return false})();this.canTransform=false;this.canTransition=false;this.canTransform3d=false;this.canAnimate=false;this.canTouch=false;this.canFlip3d=q.useHardwareAccel;if(q.useHardwareAccel==true){if(q.useModernizr==false){if(typeof(window.MetroModernizr)!=="undefined"){this.canTransform=window.MetroModernizr.canTransform;this.canTransition=window.MetroModernizr.canTransition;this.canTransform3d=window.MetroModernizr.canTransform3d;this.canAnimate=window.MetroModernizr.canAnimate;this.canTouch=window.MetroModernizr.canTouch}else{window.MetroModernizr={};var v="metromodernizr";var m=document.documentElement;var u=document.head||document.getElementsByTagName("head")[0];var k=document.createElement(v);var r=k.style;var s=" -webkit- -moz- -o- -ms- ".split(" ");var t="Webkit Moz O ms Khtml".split(" ");var o=function(x,y){for(var w in x){if(r[x[w]]!==undefined&&(!y||y(x[w],k))){return true}}};var p=function(z,y){var x=z.charAt(0).toUpperCase()+z.substr(1),w=(z+" "+t.join(x+" ")+x).split(" ");return !!o(w,y)};var l=function(){var w=!!o(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);if(w&&"webkitPerspective" in m.style){w=n(["@media (",s.join("transform-3d),("),v,")","{#metromodernizr{left:9px;position:absolute;height:3px;}}"].join(""),function(x){return x.offsetHeight===3&&x.offsetLeft===9})}return w};var n=function(z,w){var y=document.createElement("style"),A=document.createElement("div"),x;y.textContent=z;u.appendChild(y);A.id=v;m.appendChild(A);x=w(A);y.parentNode.removeChild(y);A.parentNode.removeChild(A);return !!x};var j=function(){return canTouch=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch||(window.PointerEvent&&window.navigator.maxTouchPoints>0)||(window.MSPointerEvent&&window.navigator.msMaxTouchPoints>0)||n(["@media (",s.join("touch-enabled),("),v,")","{#metromodernizr{top:9px;position:absolute}}"].join(""),function(w){return w.offsetTop===9})};this.canTransform=!!o(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]);this.canTransition=p("transitionProperty");this.canTransform3d=l();this.canAnimate=p("animationName");this.canTouch=j();window.MetroModernizr.canTransform=this.canTransform;window.MetroModernizr.canTransition=this.canTransition;window.MetroModernizr.canTransform3d=this.canTransform3d;window.MetroModernizr.canAnimate=this.canAnimate;window.MetroModernizr.canTouch=this.canTouch;m=null;u=null;k=null;r=null}}else{this.canTransform=f("html").hasClass("csstransforms");this.canTransition=f("html").hasClass("csstransitions");this.canTransform3d=f("html").hasClass("csstransforms3d");this.canAnimate=f("html").hasClass("cssanimations");this.canTouch=f("html").hasClass("touch")||(typeof(window.navigator.msMaxTouchPoints)!=="undefined"&&window.navigator.msMaxTouchPoints>0)}}this.canFlip3d=this.canFlip3d&&this.canAnimate&&this.canTransform&&this.canTransform3d}})(jQuery);

 
